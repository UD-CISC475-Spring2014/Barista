<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
	<hibernate-mapping package="org.hibernate.Vend" schema="Vend">
	<!-- Object Completed:
			Contact
			ContactEmail
			EventRating
			Project
			ProjectEvent
			ProjectEventContact
			VendAddress
			VendContact
			VendEmail
			Vendor
			VendorAddr
			VendorProjContact
			 -->
	
		<class name="Contact" table="tblContact">
		
			<id name="ContactId" column="ContactId">
				<generator class="guid"/>
			</id>
		
			<property name="ContactFirstName" column="contactfirstname"/>
			<property name="ContactMiddleName" column="contactmiddlename"/>
			<property name="ContactLastName" column="contactlastname"/>
			<property name="ActiveFlg" column="activeflg"/>
			<set name="ProjectEventContacts" table="tblProjectEventContact" fetch="select">
				<key column="ContactID"/>
				<one-to-many class="ProjectEventContact"/>
			</set>
			<set name="VendContacts" table="tblVendContact" fetch="select">
				<key column="ContactID"/>
				<one-to-many class="VendContact"/>
			</set>
			<set name="ContactEmails" table="tblContactEmail" fetch="select">
				<key column="ContactID"/>
				<one-to-many class="ContactEmail"/>
			</set>
			<set name="VendorProjContacts" table="tblVendorProjContact" fetch="select">
				<key column="ContactID"/>
				<one-to-many class="VendorProjContact"/>
			</set>			
		</class>
		
		<class name="Vendor" table="tblVendor">
			<id name="VendorID" column="VendorID">
				<generator class="guid"/>
			</id>
			<property name="VendorName" column="VendorName"/>
			<property name="ActiveFlg" column="ActiveFlg"/>
			<set name="VendContacts" table="tblVendContact" fetch="select">
				<key column="VendorID"/>
				<one-to-many class="VendContact"/>
			</set>
			<set name="VendorAddrs" table="tblVendorAddr" fetch="select">
				<key column="VendorID"/>
				<one-to-many class="VendorAddr"/>
			</set>
			<set name="VendorProjContacts" table="tblVendorProjContact" fetch="select">
				<key column="VendorID"/>
				<one-to-many class="VendorProjContact"/>
			</set>			
		</class>
		
		<class name="VendContact" table="tblVendContact">
			<composite-id>
				<key-many-to-one name="Vendor" class="Vendor">
					<column name="VendorID"/>
				</key-many-to-one>
				<key-many-to-one name="Contact" class="Contact">
					<column name="ContactID"/>
				</key-many-to-one>
			</composite-id>
			
			<property name="PrimaryContact" column="PrimaryContact"/>
		</class>
		
		<class name="VendAddress" table="tblVendAddress">
			<id name="AddrID" column="AddrID">
				<generator class="increment"/>
			</id>
			
			<property name="AddrLine1" column="AddrLine1"/>
			<property name="AddrLine2" column="AddrLine2"/>
			<property name="AddrLine3" column="AddrLine3"/>
			<property name="City" column="City"/>
			<property name="St" column="St"/>
			<property name="Zip" column="Zip"/>
			<property name="Zip4" column="Zip4"/>
			<property name="ActiveFlg" column="ActiveFlg"/>
			
			<set name="VendorAddrs" table="tblVendorAddr" fetch="select">
				<key column="AddrID"/>
				<one-to-many class="VendorAddr"/>
			</set>
			<set name="Projects" table="tblProject" fetch="select">
				<key column="AddrID"/>
				<one-to-many class="Project"/>
			</set>
		</class>
		
		<class name="VendorAddr" table="tblVendorAddr">
			<composite-id>
				<key-many-to-one name="Vendor" class="Vendor">
					<column name="VendorID" not-null="true"/>
				</key-many-to-one>
				<key-many-to-one name="VendAddress" class="VendAddress">
					<column name="AddrID" not-null="true"/>
				</key-many-to-one>
			</composite-id>
			
			<property name="HQ" column="HQ"/>
		</class>
		
		<class name="ContactEmail" table="tblContactEmail">
	
			<composite-id>
				<key-many-to-one name="Contact" class="Contact">
					<column name="ContactID" not-null="true"/>				
				</key-many-to-one>
				<key-many-to-one name="VendEmail" class="VendEmail">
					<column name="EmailID" not-null="true"/>
				</key-many-to-one>
			</composite-id>	
	
			<property name="PrimaryEmail" column="PrimaryEmail"/>
	
		</class>
		
		<class name="VendEmail" table="tblVendEmail">
			<id name="EmailID" column="EmailID">
				<generator class="increment"/>
			</id>
			<property name="EmailAddr" column="EmailAddr"/>
			<property name="ActiveFlg" column="ActiveFlg"/>
			
			<set name="ContactEmails" table="tblContactEmail" fetch="select">
				<key column="EmailID"/>
				<one-to-many class="ContactEmail"/>
			</set>
		</class>

		<class name="Project" table="tblProject">
	
			<id name="ProjectID" column="ProjectID">
				<generator class="guid"/>
			</id>
	
			<property name="ProjectName" column="ProjectName"/>
			<property name="ProjectDesc" column="ProjectDesc"/>
			<property name="ActiveFlg" column="ActiveFlg"/>
			<many-to-one name="VendAddress" column="AddrID" class="VendAddress" not-null="true"></many-to-one>
			
			<set name="VendorProjContacts" table="tblVendorProjContact" fetch="select">
				<key column="ProjectID"/>
				<one-to-many class="VendorProjContact"/>
			</set>
	
		</class>
		
		<class name="ProjectEvent" table="tblProjectEvent">
			<id name="EventID" column="EventID">
				<generator class="guid"/>
			</id>
			
			<property name="ProjectID" column="ProjectID"/>
			<property name="StartDateTime" column="StartDateTime"/>
			<property name="EndDateTime" column="EndDateTime"/>
			<property name="AddrID" column="AddrID"/>
			
			<set name="EventRatings" table="tblEventRating" fetch="select">
				<key column="EventID"/>
				<one-to-many class="EventRating"/>
			</set>

		</class>
		
		
		<class name="EventRating" table="tblEventRating">
			
			<id name="RatingID" column="RatingID">
				<generator class="increment"/>
			</id>
			
			<many-to-one name="ProjectEvent" class="ProjectEvent" fetch="select">
				<column name="EventID" not-null="true"/>
			</many-to-one>
			
			<property name="VolID" column="VolID"/>
			<property name="RatingValue" column="RatingValue"/>
			<property name="ActiveFlg" column="ActiveFlg"/>
		</class>
		
		<class name="ProjectEventContact" table="tblProjectEventContact">
			<composite-id>
				<key-many-to-one name="ProjectEvent" class="ProjectEvent">
					<column name="EventID" not-null="true"/>
				</key-many-to-one>
				<key-many-to-one name="Contact" class="Contact">
					<column name="ContactID" not-null="true"></column>
				</key-many-to-one>
			</composite-id>
			
			<property name="PrimaryContact" column="PrimaryContact"/>
		</class>
		
		<class name="VendorProjContact" table="tblVendorProjContact">
			<composite-id>
				<key-many-to-one name="Vendor" class="Vendor">
					<column name="VendorID" not-null="true"/>
				</key-many-to-one>
				<key-many-to-one name="Project" class="Project">
					<column name="ProjectID" not-null="true"/>
				</key-many-to-one>
				<key-many-to-one name="Contact" class="Contact">
					<column name="ContactID" not-null="true"/>
				</key-many-to-one>
			</composite-id>
			
			<property name="PrimaryContact" column="PrimaryContact"/>
		</class>
    </hibernate-mapping>